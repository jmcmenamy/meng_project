<h1 dir="auto">meng_project</h1>
<p dir="auto">For my MEng, I made tools for debugging distributed system executions.</p>
<h3 dir="auto">DisViz</h3>
<p dir="auto"><a href="https://jmcmenamy.github.io/disviz/" rel="nofollow">DisViz</a> is a browser-based tool to visualize distributed system logs. See the repo's README for more information on how to use it.</p>
<h3 dir="auto">GoVector</h3>
<p dir="auto"><a href="https://jmcmenamy.github.io/GoVector/" rel="nofollow">GoVector</a> is a Go package for producing logs with vector clocks, which allows DisViz to parse them and create a visualization of the execution. See the repo's README for more information on how to use it.</p>
<h3 dir="auto">ptest</h3>
<p dir="auto">When debugging distributed systems, it's often necessary to run a test many times before getting a failure from a race condition, deadlock, etc. Go doesn't natively support running a test case many times in parallel (without specifically <a href="https://pkg.go.dev/testing#T.Run" rel="nofollow">implementing tests</a> for this purpose), so having a tool to help run parallel tests can save a lot of time.</p>
<p dir="auto"><a href="https://github.com/jmcmenamy/meng_project/blob/main/parallel_tests/ptest">ptest</a> is a small bash script that uses a slightly modified python script called <a href="https://gist.github.com/JJGO/0d73540ef7cc2f066cb535156b7cbdab">dstest</a>. dstest is described in <a href="https://blog.josejg.com/debugging-pretty/" rel="nofollow">this helpful article</a>. ptest passes all arguments to dstest.</p>
<p dir="auto">ptest looks for (or creates) a Python virtual environment (venv) and activates it to ensure dstest has the necessary Python dependencies available. It creates a timestamped directory and puts captured print output in a file in that directory. It also calls a binary from the GoVector package that wraps up all the log files from a test into one file that can be parsed by DisViz. When ptest runs a go test, it adds an <code class="notranslate">'output_dir'</code> command-line flag that user code can use to determine where to write log files, e.g. when initializing GoVector. See <a href="https://pkg.go.dev/flag" rel="nofollow">here</a> for how to parse command-line flags.</p>
<p dir="auto">Below is a diagram showing how all three of these tools are used together. It contains more detail than is needed to use the tools.</p>
<themed-picture data-catalyst-inline="true"><picture>
  <source media="(prefers-color-scheme: dark)" srcset="thesis/diagram.drawioDark.svg">
  <source media="(prefers-color-scheme: light)" srcset="thesis/diagram.drawioLight.svg">
  <img alt="System diagram" src="thesis/diagram.drawioLight.svg">
</picture></themed-picture>
<h3 dir="auto">Installation and Usage</h3>
<p dir="auto">This repo contains 3 submodules that don't need to be cloned to use this tool. To clone just what is needed, you can use this command:</p>
<div class="highlight highlight-source-shell" dir="auto"><pre class="notranslate">git clone git@github.com:jmcmenamy/meng_project.git <span class="pl-k">&amp;&amp;</span> <span class="pl-c1">cd</span> meng_project <span class="pl-k">&amp;&amp;</span> git submodule update --init --recursive disviz GoVector</pre></div>
<p dir="auto">You only need to clone GoVector if you want to make local changes to that package (remember to use the replace directive in go.mod). Otherwise, letting Go install it from the <a href="https://pkg.go.dev/github.com/jmcmenamy/GoVector" rel="nofollow">remote source</a> will work. See <a href="https://jmcmenamy.github.io/GoVector/" rel="nofollow">GoVector</a> for more details.</p>
<p dir="auto">Once the repo is cloned, you can run ptest with <code class="notranslate">bash path/to/ptest</code>, but for convenience you can also make it executable with <code class="notranslate">chmod +x path/to/ptest</code> and add it to your <code class="notranslate">PATH</code> so it can be called from anywhere. You can symlink the ptest script to a directory that's already in your <code class="notranslate">PATH</code>, or add the parallel_tests directory to your <code class="notranslate">PATH</code> in a config file like <code class="notranslate">~/.bashrc</code>. <a href="https://jvns.ca/blog/2025/02/13/how-to-add-a-directory-to-your-path/" rel="nofollow">Here's</a> <a href="https://medium.com/%40B-Treftz/macos-adding-a-directory-to-your-path-fe7f19edd2f7" rel="nofollow">some</a> <a href="https://www.linode.com/docs/guides/how-to-add-directory-to-path/" rel="nofollow">various</a> resources describing how to modify your <code class="notranslate">PATH</code>.</p>
<h3 dir="auto">Motivation</h3>
<p dir="auto">When I took <a href="https://pdos.csail.mit.edu/6.824/" rel="nofollow">6.5840</a>, a large portion of my time was spent reading through print output from failed tests. It was difficult to piece together how the nodes in the system were communicating just by reading the logs, so I wanted to make something that would speed up the debugging process. <a href="https://github.com/DistributedClocks/shiviz">ShiViz</a> was exactly the type of tool I wanted, but there were some pieces that prevented me from using it to debug my Raft implementation from 6.5840. So I focused my MEng on making changes to ShiViz and the author's logging library GoVector to enable me to debug my Raft implementation and generalize to working with larger systems like <a href="https://github.com/etcd-io/etcd">etcd</a>.</p>
<p dir="auto">If you use DisViz in academic work, you can cite the following:</p>
<div class="highlight highlight-text-bibtex" dir="auto"><pre class="notranslate"><span class="pl-k">@misc</span>{<span class="pl-en">mcmenamy2025disviz</span>,
  <span class="pl-s">author</span> = <span class="pl-s"><span class="pl-pds">{</span>Josiah McMenamy<span class="pl-pds">}</span></span>,
  <span class="pl-s">title</span> = <span class="pl-s"><span class="pl-pds">{</span>DisViz: Visualizing real-world distributed system logs with space time diagrams<span class="pl-pds">}</span></span>,
  <span class="pl-s">year</span> = <span class="pl-s"><span class="pl-pds">{</span>2025<span class="pl-pds">}</span></span>,
  <span class="pl-s">howpublished</span> = <span class="pl-s"><span class="pl-pds">{</span>\url{https://github.com/jmcmenamy/meng_project/blob/main/thesis/Josiah_MEng_Thesis.pdf}<span class="pl-pds">}</span></span>
}</pre></div>